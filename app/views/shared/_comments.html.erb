<%# We manually include the user of the comment to prevent an N+1 %>
<% subject.comments.includes(:user).order('created_at ASC').each do |comment| %>
  
  <%# Anchor for comment links from Notifications. %>
  <a name= <%= comment.id %> ></a>
  <div class="comment" id="comment-<%= comment.id %>">
    
    <div class="user-comment-avatar">
      <%= link_to comment.user do %>
        <% if comment.user.avatar %>
          <%= image_tag comment.user.avatar_img_thumb %>
        <% end %>
      <% end %>
    </div>

    <div class="comment-text">
      <%# Username, with link to user page, and "commented [time value] ago". %>
      <div class="user-comment-info">
        <%= link_to comment.user.name, comment.user %>
        <%= " " + t(".commented") + " " + time_ago_in_words(comment.created_at) + " " + t(".ago") %>
      </div>

      <%# Comment body, the text in the comment itself. %>
      <div class="comment-body">
        <%= comment.body %>
      </div>
    </div>

  </div>
<% end %>
